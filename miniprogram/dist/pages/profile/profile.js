"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[198],{5694:function(s,e,a){var t=a(8870),n=a(4705),l=a(6540),i=a(118),c=a(758),o=a.n(c),r=a(4848);class d extends l.Component{constructor(){super(...arguments),(0,n.A)(this,"state",{userInfo:null,vipStatus:null}),(0,n.A)(this,"loadUserInfo",async()=>{try{const s=o().getStorageSync("userInfo"),e=o().getStorageSync("token");if(s&&e){this.setState({userInfo:s});const a=await o().request({url:"https://aimusic.sale/api/user/vip-status",method:"GET",header:{Authorization:"Bearer ".concat(e)}});a.data.success&&this.setState({vipStatus:a.data.data})}}catch(s){console.error("\u52a0\u8f7d\u7528\u6237\u4fe1\u606f\u5931\u8d25:",s)}}),(0,n.A)(this,"logout",async()=>{const s=await o().showModal({title:"\u786e\u8ba4\u9000\u51fa",content:"\u786e\u5b9a\u8981\u9000\u51fa\u767b\u5f55\u5417\uff1f"});s.confirm&&(o().removeStorageSync("userInfo"),o().removeStorageSync("token"),o().showToast({title:"\u5df2\u9000\u51fa\u767b\u5f55",icon:"success"}),setTimeout(()=>{o().navigateTo({url:"/pages/login/login"})},1500))}),(0,n.A)(this,"viewVipDetails",()=>{o().showModal({title:"VIP\u7279\u6743",content:"VIP\u7528\u6237\u53ef\u4ee5\u4eab\u53d7\u66f4\u591a\u521b\u4f5c\u6b21\u6570\u548c\u9ad8\u7ea7\u529f\u80fd",showCancel:!1})}),(0,n.A)(this,"contactService",()=>{o().showModal({title:"\u8054\u7cfb\u5ba2\u670d",content:"\u5982\u6709\u95ee\u9898\u8bf7\u8054\u7cfb\u5ba2\u670d\u5fae\u4fe1\uff1aloveaimusic",showCancel:!1})}),(0,n.A)(this,"aboutUs",()=>{o().showModal({title:"\u5173\u4e8e\u6211\u4eec",content:"\u4e3a\u7231\u800c\u6b4c - AI\u60c5\u6b4c\u521b\u4f5c\u5e73\u53f0\n\n\u7528AI\u4e3a\u4f60\u7684\u7231\u60c5\u6545\u4e8b\u521b\u4f5c\u4e13\u5c5e\u60c5\u6b4c",showCancel:!1})})}componentDidMount(){this.loadUserInfo()}render(){const{userInfo:s,vipStatus:e}=this.state;return(0,r.jsxs)(i.Ss,{className:"profile",children:[(0,r.jsxs)(i.Ss,{className:"profile-header",children:[(0,r.jsxs)(i.Ss,{className:"user-info",children:[null!==s&&void 0!==s&&s.avatarUrl?(0,r.jsx)(i._V,{className:"user-avatar",src:s.avatarUrl}):(0,r.jsx)(i.Ss,{className:"user-avatar default-avatar",children:(0,r.jsx)(i.EY,{className:"avatar-text",children:"\ud83d\udc64"})}),(0,r.jsxs)(i.Ss,{className:"user-details",children:[(0,r.jsx)(i.EY,{className:"user-name",children:(null===s||void 0===s?void 0:s.nickName)||"\u672a\u767b\u5f55"}),(0,r.jsx)(i.EY,{className:"user-desc",children:"vip"===(null===e||void 0===e?void 0:e.vipLevel)?"VIP\u7528\u6237":"\u666e\u901a\u7528\u6237"})]})]}),"vip"===(null===e||void 0===e?void 0:e.vipLevel)&&(0,r.jsx)(i.Ss,{className:"vip-badge",children:(0,r.jsx)(i.EY,{className:"vip-text",children:"VIP"})})]}),(0,r.jsxs)(i.Ss,{className:"profile-content",children:[(0,r.jsxs)(i.Ss,{className:"stats-section",children:[(0,r.jsxs)(i.Ss,{className:"stat-item",children:[(0,r.jsx)(i.EY,{className:"stat-number",children:(null===e||void 0===e?void 0:e.credits)||0}),(0,r.jsx)(i.EY,{className:"stat-label",children:"\u5269\u4f59\u79ef\u5206"})]}),(0,r.jsxs)(i.Ss,{className:"stat-item",children:[(0,r.jsx)(i.EY,{className:"stat-number",children:(null===e||void 0===e?void 0:e.totalWorks)||0}),(0,r.jsx)(i.EY,{className:"stat-label",children:"\u521b\u4f5c\u4f5c\u54c1"})]}),(0,r.jsxs)(i.Ss,{className:"stat-item",children:[(0,r.jsx)(i.EY,{className:"stat-number",children:(null===e||void 0===e?void 0:e.totalDays)||0}),(0,r.jsx)(i.EY,{className:"stat-label",children:"\u4f7f\u7528\u5929\u6570"})]})]}),(0,r.jsxs)(i.Ss,{className:"menu-section",children:[(0,r.jsxs)(i.Ss,{className:"menu-item",onClick:this.viewVipDetails,children:[(0,r.jsx)(i.EY,{className:"menu-icon",children:"\ud83d\udc51"}),(0,r.jsx)(i.EY,{className:"menu-text",children:"VIP\u7279\u6743"}),(0,r.jsx)(i.EY,{className:"menu-arrow",children:"\u203a"})]}),(0,r.jsxs)(i.Ss,{className:"menu-item",onClick:this.contactService,children:[(0,r.jsx)(i.EY,{className:"menu-icon",children:"\ud83d\udcac"}),(0,r.jsx)(i.EY,{className:"menu-text",children:"\u8054\u7cfb\u5ba2\u670d"}),(0,r.jsx)(i.EY,{className:"menu-arrow",children:"\u203a"})]}),(0,r.jsxs)(i.Ss,{className:"menu-item",onClick:this.aboutUs,children:[(0,r.jsx)(i.EY,{className:"menu-icon",children:"\u2139\ufe0f"}),(0,r.jsx)(i.EY,{className:"menu-text",children:"\u5173\u4e8e\u6211\u4eec"}),(0,r.jsx)(i.EY,{className:"menu-arrow",children:"\u203a"})]})]})]}),(0,r.jsx)(i.Ss,{className:"profile-footer",children:(0,r.jsx)(i.$n,{className:"btn-secondary logout-btn",onClick:this.logout,children:"\u9000\u51fa\u767b\u5f55"})})]})}}var m={navigationBarTitleText:"\u4e2a\u4eba\u4e2d\u5fc3"},h=(0,t.eU)(d,"pages/profile/profile",{root:{cn:[]}},m||{});d&&d.behaviors&&(h.behaviors=(h.behaviors||[]).concat(d.behaviors));Page(h)}},function(s){var e=function(e){return s(s.s=e)};s.O(0,[907,96],function(){return e(5694)});s.O()}]);